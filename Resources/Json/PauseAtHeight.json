{
    "name": "Pause at height Injection",
    "key": "PauseAtHeight_Injection",
    "metadata": {},
    "version": 2,
    "settings":
    { 
        "pause_method":
        {
            "label": "Method",
            "description": "The method or gcode command to use for pausing.",
            "type": "enum",
            "options": {"marlin": "Marlin (M0)", "griffin": "Griffin (M0, firmware retract)", "bq": "BQ (M25)", "reprap": "RepRap (M226)", "repetier": "Repetier/OctoPrint (@pause)"},
            "default_value": "marlin",
            "value": "\"griffin\" if machine_gcode_flavor==\"Griffin\" else \"reprap\" if machine_gcode_flavor==\"RepRap (RepRap)\" else \"repetier\" if machine_gcode_flavor==\"Repetier\" else \"bq\" if \"BQ\" in machine_name or \"Flying Bear Ghost 4S\" in machine_name  else \"marlin\""
        },
        "hold_steppers_on":
        {
            "label": "Keep motors engaged",
            "description": "Keep the steppers engaged to allow change of filament without moving the head. Applying too much force will move the head/bed anyway",
            "type": "bool",
            "default_value": false,
            "enabled": "pause_method != \"griffin\""
        },
        "disarm_timeout":
        {
            "label": "Disarm timeout",
            "description": "After this time steppers are going to disarm (meaning that they can easily lose their positions). Set this to 0 if you don't want to set any duration and disarm immediately.",
            "type": "int",
            "value": "0",
            "minimum_value": "0",
            "minimum_value_warning": "0",
            "maximum_value_warning": "1800",
            "unit": "s",
            "enabled": "not hold_steppers_on"
        },
        "head_park_enabled":
        {
            "label": "Park Print",
            "description": "Instruct the head to move to a safe location when pausing. Leave this unchecked if your printer handles parking for you.",
            "type": "bool",
            "default_value": true,
            "enabled": "pause_method != \"griffin\""
        },
        "head_park_x":
        {
            "label": "Park Print Head X",
            "description": "What X location does the head move to when pausing.",
            "unit": "mm",
            "type": "float",
            "default_value": 190,
            "enabled": "head_park_enabled and pause_method != \"griffin\""
        },
        "head_park_y":
        {
            "label": "Park Print Head Y",
            "description": "What Y location does the head move to when pausing.",
            "unit": "mm",
            "type": "float",
            "default_value": 190,
            "enabled": "head_park_enabled and pause_method != \"griffin\""
        },
        "head_move_z":
        {
            "label": "Head move Z",
            "description": "The Height of Z-axis retraction before parking.",
            "unit": "mm",
            "type": "float",
            "default_value": 15.0,
            "enabled": "head_park_enabled and pause_method == \"repetier\""
        },
        "retraction_amount":
        {
            "label": "Retraction",
            "description": "How much filament must be retracted at pause.",
            "unit": "mm",
            "type": "float",
            "default_value": 0,
            "enabled": "pause_method != \"griffin\""
        },
        "retraction_speed":
        {
            "label": "Retraction Speed",
            "description": "How fast to retract the filament.",
            "unit": "mm/s",
            "type": "float",
            "default_value": 25,
            "enabled": "pause_method not in [\"griffin\", \"repetier\"]"
        },
        "extrude_amount":
        {
            "label": "Extrude Amount",
            "description": "How much filament should be extruded after pause. This is needed when doing a material change on Ultimaker2's to compensate for the retraction after the change. In that case 128+ is recommended.",
            "unit": "mm",
            "type": "float",
            "default_value": 0,
            "enabled": "pause_method != \"griffin\""
        },
        "extrude_speed":
        {
            "label": "Extrude Speed",
            "description": "How fast to extrude the material after pause.",
            "unit": "mm/s",
            "type": "float",
            "default_value": 3.3333,
            "enabled": "pause_method not in [\"griffin\", \"repetier\"]"
        },
        "redo_layer":
        {
            "label": "Redo Layer",
            "description": "Redo the last layer before the pause, to get the filament flowing again after having oozed a bit during the pause.",
            "type": "bool",
            "default_value": false
        },
        "standby_wait_for_temperature_enabled":
        {
            "label": "Use M109 for standby temperature? (M104 when false)",
            "description": "Wait for hot end after Resume? (If your standby temperature is lower than the Printing temperature CHECK and use M109",
            "type": "bool",
            "default_value": true,
            "enabled": "pause_method not in [\"griffin\", \"repetier\"]"                                              
        },
        "standby_temperature":
        {
            "label": "Standby Temperature",
            "description": "Change the temperature during the pause.",
            "unit": "C",
            "type": "int",
            "default_value": 0,
            "enabled": "pause_method not in [\"griffin\", \"repetier\"]"
        },
        "display_text":
        {
            "label": "Display Text",
            "description": "Text that should appear on the display while paused. If left empty, there will not be any message.",
            "type": "str",
            "default_value": "",
            "enabled": "pause_method != \"repetier\""
        },
        "machine_name":
        {
            "label": "Machine Type",
            "description": "The name of your 3D printer model. This setting is controlled by the script and will not be visible.",
            "default_value": "Unknown",
            "type": "str",
            "enabled": false
        },
        "machine_gcode_flavor":
        {
            "label": "G-code flavor",
            "description": "The type of g-code to be generated. This setting is controlled by the script and will not be visible.",
            "type": "enum",
            "options":
            {
                "RepRap (Marlin/Sprinter)": "Marlin",
                "RepRap (Volumetric)": "Marlin (Volumetric)",
                "RepRap (RepRap)": "RepRap",
                "UltiGCode": "Ultimaker 2",
                "Griffin": "Griffin",
                "Makerbot": "Makerbot",
                "BFB": "Bits from Bytes",
                "MACH3": "Mach3",
                "Repetier": "Repetier"
            },
            "default_value": "RepRap (Marlin/Sprinter)",
            "enabled": false
        },
        "beep_at_pause":
        {
            "label": "Beep at pause",
            "description": "Make a beep when pausing",
            "type": "bool",
            "default_value": false
        },                
        "beep_length":
        {
            "label": "Beep length",
            "description": "How much should the beep last",
            "type": "int",
            "default_value": "1000",
            "unit": "ms",
            "enabled": "beep_at_pause"
        },
        "custom_gcode_before_pause":
        {
            "label": "G-code Before Pause",
            "description": "Custom g-code to run before the pause. EX: M300 to beep. Use a comma to separate multiple commands. EX: M400,M300,M117 Pause",
            "type": "str",
            "default_value": ""
        },
        "custom_gcode_after_pause":
        {
            "label": "G-code After Pause",
            "description": "Custom g-code to run after the pause. Use a comma to separate multiple commands. EX: M204 X8 Y8,M106 S0,M117 Resume",
            "type": "str",
            "default_value": ""
        }
    }
}